<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <title>ê³µì—° ê²€ìƒ‰ ë° ì¶”ì²œ ê´€ë¦¬</title>-->
<!--    <meta charset="UTF-8" />-->
<!--    <style>-->
<!--        body {-->
<!--            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;-->
<!--            margin: 40px;-->
<!--            background-color: #f9f9f9;-->
<!--            color: #333;-->
<!--        }-->

<!--        h2 {-->
<!--            margin-top: 40px;-->
<!--            color: #444;-->
<!--            border-bottom: 2px solid #ddd;-->
<!--            padding-bottom: 5px;-->
<!--        }-->

<!--        form {-->
<!--            margin-bottom: 30px;-->
<!--            background: #fff;-->
<!--            padding: 20px;-->
<!--            border-radius: 8px;-->
<!--            box-shadow: 0 2px 8px rgba(0,0,0,0.05);-->
<!--        }-->

<!--        input[type="text"] {-->
<!--            padding: 10px;-->
<!--            width: 60%;-->
<!--            border: 1px solid #ccc;-->
<!--            border-radius: 4px;-->
<!--            font-size: 16px;-->
<!--            margin-right: 10px;-->
<!--        }-->

<!--        button {-->
<!--            padding: 10px 20px;-->
<!--            background-color: #2a9d8f;-->
<!--            color: white;-->
<!--            border: none;-->
<!--            border-radius: 4px;-->
<!--            cursor: pointer;-->
<!--            font-size: 15px;-->
<!--            transition: background-color 0.3s ease;-->
<!--        }-->

<!--        button:hover {-->
<!--            background-color: #21867a;-->
<!--        }-->

<!--        ul {-->
<!--            list-style: none;-->
<!--            padding-left: 0;-->
<!--            margin-top: 10px;-->
<!--        }-->

<!--        li {-->
<!--            margin: 10px 0;-->
<!--            padding: 8px 12px;-->
<!--            background: #f0f0f0;-->
<!--            border-radius: 4px;-->
<!--            transition: background-color 0.2s;-->
<!--        }-->

<!--        li:hover {-->
<!--            background-color: #e6e6e6;-->
<!--        }-->

<!--        label {-->
<!--            cursor: pointer;-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--        }-->

<!--        input[type="checkbox"] {-->
<!--            margin-right: 10px;-->
<!--        }-->

<!--        hr {-->
<!--            margin: 50px 0;-->
<!--            border: none;-->
<!--            border-top: 1px solid #ccc;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--<h2>ê³µì—° ê²€ìƒ‰</h2>-->

<!--<form id="search-form">-->
<!--    <input type="text" id="search-input" placeholder="ê³µì—°ëª… ê²€ìƒ‰ì–´ ì…ë ¥" required />-->
<!--    <button type="submit">ê²€ìƒ‰</button>-->
<!--</form>-->

<!--<hr/>-->

<!--<h2>ê²€ìƒ‰ ê²°ê³¼</h2>-->
<!--<div>-->
<!--    <form id="recommend-form">-->
<!--        <ul id="search-results">-->
<!--            <li>ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ê³  ê²€ìƒ‰ ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.</li>-->
<!--        </ul>-->
<!--        <button type="submit">ì„ íƒí•œ ê³µì—° ì¶”ì²œ ë“±ë¡</button>-->
<!--    </form>-->
<!--</div>-->

<!--<hr/>-->

<!--<h2>í˜„ì¬ ì¶”ì²œëœ ê³µì—° ëª©ë¡</h2>-->
<!--<form id="delete-form">-->
<!--    <ul id="recommended-performances">-->
<!--        <li>ì¶”ì²œëœ ê³µì—° ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</li>-->
<!--    </ul>-->
<!--    <button type="submit">ì„ íƒí•œ ì¶”ì²œ ê³µì—° ì‚­ì œ</button>-->
<!--</form>-->

<!--<script th:inline="javascript">-->
<!--    const adminId = /*[[${token}]]*/ '';-->
<!--</script>-->

<!--<script>-->
<!--    // ì¶”ì²œ ê³µì—° ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°-->
<!--    async function fetchRecommendedPerformances() {-->
<!--        try {-->
<!--            const res = await fetch('/performances/custom');-->
<!--            const data = await res.json();-->

<!--            const list = document.getElementById('recommended-performances');-->
<!--            list.innerHTML = '';-->

<!--            if (data.length === 0) {-->
<!--                list.innerHTML = '<li>í˜„ì¬ ì¶”ì²œëœ ê³µì—°ì´ ì—†ìŠµë‹ˆë‹¤.</li>';-->
<!--                return;-->
<!--            }-->

<!--            data.forEach(perf => {-->
<!--                const li = document.createElement('li');-->
<!--                li.innerHTML = `-->
<!--                    <label>-->
<!--                        <input type="checkbox" name="performanceIds" value="${perf.id}" />-->
<!--                        ${perf.performanceName}-->
<!--                    </label>-->
<!--                `;-->
<!--                list.appendChild(li);-->
<!--            });-->
<!--        } catch (err) {-->
<!--            alert('ì¶”ì²œ ê³µì—° ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨: ' + err.message);-->
<!--        }-->
<!--    }-->

<!--    // ê³µì—° ê²€ìƒ‰ ê²°ê³¼ ë³´ì—¬ì£¼ê¸°-->
<!--    async function searchPerformances(keyword) {-->
<!--        try {-->
<!--            const res = await fetch(`/performances/search?search=${encodeURIComponent(keyword)}`);-->
<!--            const data = await res.json();-->

<!--            const list = document.getElementById('search-results');-->
<!--            list.innerHTML = '';-->

<!--            if (data.length === 0) {-->
<!--                list.innerHTML = '<li>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</li>';-->
<!--                return;-->
<!--            }-->

<!--            data.forEach(perf => {-->
<!--                const li = document.createElement('li');-->
<!--                li.innerHTML = `-->
<!--                    <label>-->
<!--                        <input type="checkbox" name="performanceIds" value="${perf.id}" />-->
<!--                        ${perf.performanceName}-->
<!--                    </label>-->
<!--                `;-->
<!--                list.appendChild(li);-->
<!--            });-->
<!--        } catch (err) {-->
<!--            alert('ê²€ìƒ‰ ì‹¤íŒ¨: ' + err.message);-->
<!--        }-->
<!--    }-->

<!--    // ê²€ìƒ‰ í¼ ì œì¶œ ì²˜ë¦¬ (ê²€ìƒ‰ API í˜¸ì¶œ)-->
<!--    document.getElementById('search-form').addEventListener('submit', async function(e) {-->
<!--        e.preventDefault();-->
<!--        const keyword = document.getElementById('search-input').value.trim();-->
<!--        if (!keyword) {-->
<!--            alert('ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');-->
<!--            return;-->
<!--        }-->
<!--        await searchPerformances(keyword);-->
<!--    });-->

<!--    // ì¶”ì²œ ê³µì—° ë“±ë¡-->
<!--    document.getElementById('recommend-form').addEventListener('submit', async function(e) {-->
<!--        e.preventDefault();-->

<!--        // ê²€ìƒ‰ ê²°ê³¼ì—ì„œ ì„ íƒëœ ê³µì—° ID ìˆ˜ì§‘-->
<!--        const checked = document.querySelectorAll('#search-results input[name="performanceIds"]:checked');-->
<!--        if (checked.length === 0) {-->
<!--            alert('ì¶”ì²œ ë“±ë¡í•  ê³µì—°ì„ í•˜ë‚˜ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”.');-->
<!--            return;-->
<!--        }-->

<!--        const ids = Array.from(checked).map(cb => Number(cb.value));-->
<!--        const payload = { performanceIds: ids };-->

<!--        try {-->
<!--            const res = await fetch('/performances/custom', {-->
<!--                method: 'POST',-->
<!--                headers: {-->
<!--                    'Content-Type': 'application/json',-->
<!--                    'Authorization': `Bearer ${adminId}`-->
<!--                },-->
<!--                body: JSON.stringify(payload)-->
<!--            });-->

<!--            if (res.ok) {-->
<!--                alert('ì¶”ì²œ ê³µì—°ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.');-->
<!--                // ì¶”ì²œ ê³µì—° ëª©ë¡ ê°±ì‹  + ê²€ìƒ‰ ê²°ê³¼ ì²´í¬ë°•ìŠ¤ í•´ì œ-->
<!--                await fetchRecommendedPerformances();-->
<!--                document.getElementById('recommend-form').reset();-->
<!--            } else {-->
<!--                const msg = await res.text();-->
<!--                alert('ì¶”ì²œ ë“±ë¡ ì‹¤íŒ¨: ' + msg);-->
<!--            }-->
<!--        } catch (err) {-->
<!--            alert('ì¶”ì²œ ë“±ë¡ ìš”ì²­ ì‹¤íŒ¨: ' + err.message);-->
<!--        }-->
<!--    });-->

<!--    // ì¶”ì²œ ê³µì—° ì‚­ì œ-->
<!--    document.getElementById('delete-form').addEventListener('submit', async function(e) {-->
<!--        e.preventDefault();-->

<!--        // ì¶”ì²œ ê³µì—° ëª©ë¡ì—ì„œ ì„ íƒëœ ê³µì—° ID ìˆ˜ì§‘-->
<!--        const checked = document.querySelectorAll('#recommended-performances input[name="performanceIds"]:checked');-->
<!--        if (checked.length === 0) {-->
<!--            alert('ì‚­ì œí•  ì¶”ì²œ ê³µì—°ì„ í•˜ë‚˜ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”.');-->
<!--            return;-->
<!--        }-->

<!--        const ids = Array.from(checked).map(cb => Number(cb.value));-->
<!--        const payload = { performanceIds: ids };-->

<!--        try {-->
<!--            const res = await fetch('/performances/custom', {-->
<!--                method: 'DELETE',-->
<!--                headers: {-->
<!--                    'Content-Type': 'application/json',-->
<!--                    'Authorization': `Bearer ${adminId}`-->
<!--                },-->
<!--                body: JSON.stringify(payload)-->
<!--            });-->

<!--            if (res.ok) {-->
<!--                alert('ì¶”ì²œ ê³µì—°ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');-->
<!--                await fetchRecommendedPerformances();-->
<!--            } else {-->
<!--                const msg = await res.text();-->
<!--                alert('ì‚­ì œ ì‹¤íŒ¨: ' + msg);-->
<!--            }-->
<!--        } catch (err) {-->
<!--            alert('ì‚­ì œ ìš”ì²­ ì‹¤íŒ¨: ' + err.message);-->
<!--        }-->
<!--    });-->

<!--    // ì´ˆê¸° ë¡œë“œ ì‹œ ì¶”ì²œ ê³µì—° ëª©ë¡ ê°€ì ¸ì˜¤ê¸°-->
<!--    document.addEventListener('DOMContentLoaded', fetchRecommendedPerformances);-->
<!--</script>-->
<!--</body>-->
<!--</html>-->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>ê³µì—° ê²€ìƒ‰ ë° ì¶”ì²œ ê´€ë¦¬</title>
    <meta charset="UTF-8" />
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 40px;
            background-color: #f9f9f9;
            color: #333;
        }

        h2 {
            margin-top: 40px;
            color: #444;
            border-bottom: 2px solid #ddd;
            padding-bottom: 5px;
        }

        form {
            margin-bottom: 30px;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        input[type="text"] {
            padding: 10px;
            width: 60%;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 16px;
            margin-right: 10px;
        }

        button {
            padding: 10px 20px;
            background-color: #2a9d8f;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 15px;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #21867a;
        }

        ul {
            list-style: none;
            padding-left: 0;
            margin-top: 10px;
        }

        li {
            margin: 10px 0;
            padding: 8px 12px;
            background: #f0f0f0;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        li:hover {
            background-color: #e6e6e6;
        }

        label {
            cursor: pointer;
            display: flex;
            align-items: center;
        }

        input[type="checkbox"] {
            margin-right: 10px;
        }

        hr {
            margin: 50px 0;
            border: none;
            border-top: 1px solid #ccc;
        }

        /* --- ì¸ê¸° ê³µì—° ëª©ë¡ ìŠ¤íƒ€ì¼ ìˆ˜ì • --- */
        #popular-performances-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 25px;
            padding: 0;
        }

        #popular-performances-list li {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            padding: 0; /* íŒ¨ë”©ì„ a íƒœê·¸ë¡œ ì´ë™ */
            margin: 0;
            text-align: left;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            overflow: hidden; /* a íƒœê·¸ê°€ li ë°–ìœ¼ë¡œ ë‚˜ê°€ì§€ ì•Šë„ë¡ */
        }

        #popular-performances-list li:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        #popular-performances-list .perf-link {
            text-decoration: none;
            color: inherit;
            display: block;
        }

        #popular-performances-list img {
            width: 100%;
            display: block;
            border-bottom: 1px solid #eee;
            aspect-ratio: 2 / 3;
            object-fit: cover;
            background-color: #f0f0f0;
        }

        #popular-performances-list .perf-info {
            padding: 12px;
        }

        #popular-performances-list .perf-name {
            font-weight: bold;
            font-size: 16px;
            color: #333;
            margin-bottom: 8px;
            /* ê¸´ í…ìŠ¤íŠ¸ ìë¥´ê¸° */
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        #popular-performances-list .perf-details {
            font-size: 13px;
            color: #666;
            line-height: 1.5;
        }

        #popular-performances-list .perf-details span {
            display: block;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

    </style>
</head>
<body>

<!-- ======================= ì¸ê¸° ê³µì—° ì„¹ì…˜ ======================= -->
<h2>ì¸ê¸° ê³µì—° ëª©ë¡ (ìƒìœ„ 6ê°œ)</h2>
<ul id="popular-performances-list">
    <li>ì¸ê¸° ê³µì—° ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</li>
</ul>
<hr/>
<!-- =============================================================== -->


<h2>ê³µì—° ê²€ìƒ‰</h2>
<form id="search-form">
    <input type="text" id="search-input" placeholder="ê³µì—°ëª… ê²€ìƒ‰ì–´ ì…ë ¥" required />
    <button type="submit">ê²€ìƒ‰</button>
</form>

<hr/>

<h2>ê²€ìƒ‰ ê²°ê³¼</h2>
<div>
    <form id="recommend-form">
        <ul id="search-results">
            <li>ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ê³  ê²€ìƒ‰ ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.</li>
        </ul>
        <button type="submit">ì„ íƒí•œ ê³µì—° ì¶”ì²œ ë“±ë¡</button>
    </form>
</div>

<hr/>

<h2>í˜„ì¬ ì¶”ì²œëœ ê³µì—° ëª©ë¡</h2>
<form id="delete-form">
    <ul id="recommended-performances">
        <li>ì¶”ì²œëœ ê³µì—° ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</li>
    </ul>
    <button type="submit">ì„ íƒí•œ ì¶”ì²œ ê³µì—° ì‚­ì œ</button>
</form>

<script th:inline="javascript">
    const adminId = /*[[${token}]]*/ '';
</script>

<script>
    /**
     * @apiNote ì¸ê¸° ê³µì—° 6ê°œë¥¼ ì¡°íšŒí•˜ê³ , DTO ê¸°ë°˜ìœ¼ë¡œ ìƒì„¸ ì •ë³´ë¥¼ í™”ë©´ì— í‘œì‹œí•©ë‹ˆë‹¤.
     */
    async function fetchPopularPerformances() {
        try {
            const res = await fetch('/performances/popular');
            if (!res.ok) {
                throw new Error(`ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜: ${res.status}`);
            }
            const data = await res.json();

            const list = document.getElementById('popular-performances-list');
            list.innerHTML = '';

            if (!data || data.length === 0) {
                list.innerHTML = '<li>ì¸ê¸° ê³µì—° ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</li>';
                return;
            }

            data.forEach(perf => {
                const li = document.createElement('li');

                // DTO í•„ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ HTML êµ¬ì¡° ìƒì„±
                // ticketLinkê°€ ìˆìœ¼ë©´ a íƒœê·¸ë¡œ ê°ì‹¸ê³ , ì—†ìœ¼ë©´ divë¡œ ê°ì‹¼ë‹¤.
                const content = `
                    <img src="${perf.poster}"
                         alt="${perf.performanceName} í¬ìŠ¤í„°"
                         onerror="this.onerror=null; this.src='https://placehold.co/400x600/EFEFEF/AAAAAA?text=No+Image';">
                    <div class="perf-info">
                        <div class="perf-name" title="${perf.performanceName}">${perf.performanceName}</div>
                        <div class="perf-details">
                            <span title="${perf.venue}">ğŸ“ ${perf.venue}</span>
                            <span>ğŸ—“ï¸ ${perf.startDate} ~ ${perf.endDate}</span>
                        </div>
                    </div>
                `;

                if (perf.ticketLink) {
                    li.innerHTML = `<a href="${perf.ticketLink}" target="_blank" rel="noopener noreferrer" class="perf-link">${content}</a>`;
                } else {
                    li.innerHTML = content;
                }

                list.appendChild(li);
            });

        } catch (err) {
            const list = document.getElementById('popular-performances-list');
            list.innerHTML = `<li>ì¸ê¸° ê³µì—° ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤: ${err.message}</li>`;
            console.error('ì¸ê¸° ê³µì—° ë¡œë”© ì‹¤íŒ¨:', err);
        }
    }


    // ì¶”ì²œ ê³µì—° ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
    async function fetchRecommendedPerformances() {
        try {
            const res = await fetch('/performances/custom');
            const data = await res.json();

            const list = document.getElementById('recommended-performances');
            list.innerHTML = '';

            if (data.length === 0) {
                list.innerHTML = '<li>í˜„ì¬ ì¶”ì²œëœ ê³µì—°ì´ ì—†ìŠµë‹ˆë‹¤.</li>';
                return;
            }

            data.forEach(perf => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <label>
                        <input type="checkbox" name="performanceIds" value="${perf.id}" />
                        ${perf.performanceName}
                    </label>
                `;
                list.appendChild(li);
            });
        } catch (err) {
            alert('ì¶”ì²œ ê³µì—° ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨: ' + err.message);
        }
    }

    // ê³µì—° ê²€ìƒ‰ ê²°ê³¼ ë³´ì—¬ì£¼ê¸°
    async function searchPerformances(keyword) {
        try {
            const res = await fetch(`/performances/search?keyword=${encodeURIComponent(keyword)}`);
            const data = await res.json();

            const list = document.getElementById('search-results');
            list.innerHTML = '';

            if (data.length === 0) {
                list.innerHTML = '<li>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</li>';
                return;
            }

            data.forEach(perf => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <label>
                        <input type="checkbox" name="performanceIds" value="${perf.id}" />
                        ${perf.performanceName}
                    </label>
                `;
                list.appendChild(li);
            });
        } catch (err) {
            alert('ê²€ìƒ‰ ì‹¤íŒ¨: ' + err.message);
        }
    }

    // ê²€ìƒ‰ í¼ ì œì¶œ ì²˜ë¦¬ (ê²€ìƒ‰ API í˜¸ì¶œ)
    document.getElementById('search-form').addEventListener('submit', async function(e) {
        e.preventDefault();
        const keyword = document.getElementById('search-input').value.trim();
        if (!keyword) {
            alert('ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
            return;
        }
        await searchPerformances(keyword);
    });

    // ì¶”ì²œ ê³µì—° ë“±ë¡
    document.getElementById('recommend-form').addEventListener('submit', async function(e) {
        e.preventDefault();

        const checked = document.querySelectorAll('#search-results input[name="performanceIds"]:checked');
        if (checked.length === 0) {
            alert('ì¶”ì²œ ë“±ë¡í•  ê³µì—°ì„ í•˜ë‚˜ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”.');
            return;
        }

        const ids = Array.from(checked).map(cb => Number(cb.value));
        const payload = { performanceIds: ids };

        try {
            const res = await fetch('/performances/custom', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${adminId}`
                },
                body: JSON.stringify(payload)
            });

            if (res.ok) {
                alert('ì¶”ì²œ ê³µì—°ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.');
                await fetchRecommendedPerformances();
                document.getElementById('recommend-form').reset();
            } else {
                const msg = await res.text();
                alert('ì¶”ì²œ ë“±ë¡ ì‹¤íŒ¨: ' + msg);
            }
        } catch (err) {
            alert('ì¶”ì²œ ë“±ë¡ ìš”ì²­ ì‹¤íŒ¨: ' + err.message);
        }
    });

    // ì¶”ì²œ ê³µì—° ì‚­ì œ
    document.getElementById('delete-form').addEventListener('submit', async function(e) {
        e.preventDefault();

        const checked = document.querySelectorAll('#recommended-performances input[name="performanceIds"]:checked');
        if (checked.length === 0) {
            alert('ì‚­ì œí•  ì¶”ì²œ ê³µì—°ì„ í•˜ë‚˜ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”.');
            return;
        }

        const ids = Array.from(checked).map(cb => Number(cb.value));
        const payload = { performanceIds: ids };

        try {
            const res = await fetch('/performances/custom', {
                method: 'DELETE',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${adminId}`
                },
                body: JSON.stringify(payload)
            });

            if (res.ok) {
                alert('ì¶”ì²œ ê³µì—°ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                await fetchRecommendedPerformances();
            } else {
                const msg = await res.text();
                alert('ì‚­ì œ ì‹¤íŒ¨: ' + msg);
            }
        } catch (err) {
            alert('ì‚­ì œ ìš”ì²­ ì‹¤íŒ¨: ' + err.message);
        }
    });

    // ì´ˆê¸° ë¡œë“œ ì‹œ ì¶”ì²œ ë° ì¸ê¸° ê³µì—° ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
    document.addEventListener('DOMContentLoaded', () => {
        fetchPopularPerformances();
        fetchRecommendedPerformances();
    });
</script>
</body>
</html>
